# Slack Connector

The [Elastic Slack connector](../../connectors/sources/slack.py) is provided in the Elastic connectors python framework and can be used via [build a connector](https://www.elastic.co/guide/en/enterprise-search/current/build-connector.html).

## Availability and prerequisites

This connector is available as a **connector client** from the **Python connectors framework**.
To use this connector, satisfy all [connector client requirements](https://www.elastic.co/guide/en/enterprise-search/master/build-connector.html).

This connector is in **technical preview** and is subject to change.
The design and code is less mature than official GA features and is being provided as-is with no warranties.
Technical preview features are not subject to the support SLA of official GA features.

## Usage

To use this connector as a **connector client**, use the **Customized connector** workflow.

For additional operations, see [Usage](https://www.elastic.co/guide/en/enterprise-search/master/connectors-usage.html).

Creating a Slack application is required to help the Slack connector to authenticate. 

## Slack API Authorization

### Create Slack App

You'll need to create an app in the Slack platform.
This app results in a credential that the connector uses for authentication, and also in a new Bot user that can be invited to channels.


To create the app, follow these steps:
1. Go to https://api.slack.com/apps and click "Create New App"
2. Choose "From Scratch"
3. Name the app, and select the workspace you want to sync from. Depending on the workspace's settings, you may get a warning about requiring admin approval. That's ok, we'll handle that later.
4. Navigate to "OAuth & Permissions" in the sidebar
5. Scroll down to the "Scopes" section and add the scopes, `channels:history`, `channels:read`, and `users:read`. Optionally, you can also add `channels:join` if you want the App Bot to automatically be able to add itself to public channels.
6. Scroll up to "OAuth Tokens for Your Workspace" and install the application. Your workspace may require you to get administrator approval. If so, request approval now and return to the next step once it has been approved.
7. Copy and save the new "Bot User OAuth Token". This credential will be used when configuring the connector.


## Configuration

### Configure Slack connector

The following configuration fields are required to set up the connector:

#### `token` (required)

The Bot User OAuth Token generated by creating and installing your Slack App.

#### `fetch_last_n_days` (required)

The number of days of history to fetch from Slack.
This must be a positive number to fetch a subset of data, going back that many days. 
If set to `0`, it will fetch all data since the beginning of the workspace. 
The default is 180 days.

#### `auto_join_channels` (required)

Whether or not the connector should have the App's Bot User automatically invite itself into all public channels.
The connector will only sync messages from the channels of which the Bot user is a member.
By default, the bot will not invite itself to any channels, and must be manually invited to each channel that you wish to sync.
If this setting is enabled, your App must have the `channels.join` scope.

#### `sync_users` (required)

Whether or not the connector should index a document for each Slack user.
By default, the connector will create documents only for Channels and Messages.
However, regardless of the value of this setting, the Slack App does need the `users.read` scope and will make requests to enumerate all of the workspace's users.
This allows the messages to be enriched with human-readable usernames, and not rely on unreadable User UIDs. 
Therefore, disabling this setting does not result in a speed improvement, but merely results in less overall storage in Elasticsearch.


### Content Extraction

This connector does not currently support processing Slack attachments or other binary files.


## Documents and syncs

The connector syncs the following objects and entities:
- **Channels**
- **Messages**
- **Users** (configurably)

**NOTE**:
- Only public channels and messages from public channels are synced.
- No permissions are synced. **All documents** indexed to an Elastic deployment will be visible to **all users with access** to that Elastic Deployment.

## Sync rules

[Basic sync rules](https://www.elastic.co/guide/en/enterprise-search/8.9/sync-rules.html#sync-rules-basic "Basic sync rules") are identical for all connectors and are available by default.

Advanced sync rules are not available for this connector in the present version.

## Known issues

Refer to [Known issues](https://www.elastic.co/guide/en/enterprise-search/master/connectors-known-issues.html) for a list of known issues for all connectors.

## Troubleshooting

See [Troubleshooting](https://www.elastic.co/guide/en/enterprise-search/master/connectors-troubleshooting.html).

## Security

See [security](https://www.elastic.co/guide/en/enterprise-search/master/connectors-security.html).

